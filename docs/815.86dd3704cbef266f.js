"use strict";(self.webpackChunkAngularTask=self.webpackChunkAngularTask||[]).push([[815],{3815:(N,F,a)=>{a.r(F),a.d(F,{EditComponent:()=>z});var g=a(177),i=a(4341),t=a(8699),_=a(9055),T=a(7572),p=a(5794);function u(e,l){1&e&&(t.j41(0,"p"),t.EFF(1,"Title is required"),t.k0s())}function d(e,l){1&e&&(t.j41(0,"p"),t.EFF(1,"Title must be at least 3 characters"),t.k0s())}function m(e,l){1&e&&(t.j41(0,"p"),t.EFF(1,"Title must be at most 20 characters"),t.k0s())}function D(e,l){if(1&e&&(t.j41(0,"div",26),t.DNE(1,u,2,0,"p",27),t.DNE(2,d,2,0,"p",27),t.DNE(3,m,2,0,"p",27),t.k0s()),2&e){const n=t.XpG();let o,r,s;t.R7$(1),t.Y8G("ngIf",null==(o=n.productForm.get("title"))?null:o.getError("required")),t.R7$(1),t.Y8G("ngIf",null==(r=n.productForm.get("title"))?null:r.getError("minlength")),t.R7$(1),t.Y8G("ngIf",null==(s=n.productForm.get("title"))?null:s.getError("maxlength"))}}function I(e,l){1&e&&(t.j41(0,"p"),t.EFF(1,"Description is required"),t.k0s())}function Y(e,l){1&e&&(t.j41(0,"p"),t.EFF(1,"Description must be at least 10 characters"),t.k0s())}function x(e,l){1&e&&(t.j41(0,"p"),t.EFF(1,"Description must be at most 100 characters"),t.k0s())}function B(e,l){if(1&e&&(t.j41(0,"div",26),t.DNE(1,I,2,0,"p",27),t.DNE(2,Y,2,0,"p",27),t.DNE(3,x,2,0,"p",27),t.k0s()),2&e){const n=t.XpG();let o,r,s;t.R7$(1),t.Y8G("ngIf",null==(o=n.productForm.get("description"))?null:o.getError("required")),t.R7$(1),t.Y8G("ngIf",null==(r=n.productForm.get("description"))?null:r.getError("minlength")),t.R7$(1),t.Y8G("ngIf",null==(s=n.productForm.get("description"))?null:s.getError("maxlength"))}}function O(e,l){1&e&&(t.j41(0,"p"),t.EFF(1,"Price is required"),t.k0s())}function U(e,l){1&e&&(t.j41(0,"p"),t.EFF(1,"Price must be at least 0"),t.k0s())}function y(e,l){if(1&e&&(t.j41(0,"div",26),t.DNE(1,O,2,0,"p",27),t.DNE(2,U,2,0,"p",27),t.k0s()),2&e){const n=t.XpG();let o,r;t.R7$(1),t.Y8G("ngIf",null==(o=n.productForm.get("price"))?null:o.getError("required")),t.R7$(1),t.Y8G("ngIf",null==(r=n.productForm.get("price"))?null:r.getError("min"))}}function M(e,l){1&e&&(t.j41(0,"p"),t.EFF(1,"Brand is required"),t.k0s())}function L(e,l){1&e&&(t.j41(0,"p"),t.EFF(1,"Brand must be at least 3 characters"),t.k0s())}function S(e,l){1&e&&(t.j41(0,"p"),t.EFF(1,"Brand must be at most 20 characters"),t.k0s())}function A(e,l){if(1&e&&(t.j41(0,"div",26),t.DNE(1,M,2,0,"p",27),t.DNE(2,L,2,0,"p",27),t.DNE(3,S,2,0,"p",27),t.k0s()),2&e){const n=t.XpG();let o,r,s;t.R7$(1),t.Y8G("ngIf",null==(o=n.productForm.get("brand"))?null:o.getError("required")),t.R7$(1),t.Y8G("ngIf",null==(r=n.productForm.get("brand"))?null:r.getError("minlength")),t.R7$(1),t.Y8G("ngIf",null==(s=n.productForm.get("brand"))?null:s.getError("maxlength"))}}function X(e,l){1&e&&(t.j41(0,"p"),t.EFF(1,"Tags are required"),t.k0s())}function q(e,l){1&e&&(t.j41(0,"p"),t.EFF(1,"Tags must be at least 3 characters"),t.k0s())}function w(e,l){1&e&&(t.j41(0,"p"),t.EFF(1,"Tags must be at most 20 characters"),t.k0s())}function K(e,l){if(1&e&&(t.j41(0,"div",26),t.DNE(1,X,2,0,"p",27),t.DNE(2,q,2,0,"p",27),t.DNE(3,w,2,0,"p",27),t.k0s()),2&e){const n=t.XpG();let o,r,s;t.R7$(1),t.Y8G("ngIf",null==(o=n.productForm.get("tags"))?null:o.getError("required")),t.R7$(1),t.Y8G("ngIf",null==(r=n.productForm.get("tags"))?null:r.getError("minlength")),t.R7$(1),t.Y8G("ngIf",null==(s=n.productForm.get("tags"))?null:s.getError("maxlength"))}}function H(e,l){1&e&&(t.j41(0,"p"),t.EFF(1,"Images are required"),t.k0s())}function W(e,l){if(1&e&&(t.j41(0,"div",26),t.DNE(1,H,2,0,"p",27),t.k0s()),2&e){const n=t.XpG();let o;t.R7$(1),t.Y8G("ngIf",null==(o=n.productForm.get("images"))?null:o.getError("required"))}}function V(e,l){if(1&e&&(t.j41(0,"span")(1,"span",28),t.EFF(2),t.k0s()()),2&e){const n=l.$implicit;t.R7$(2),t.JRh(n.trim())}}function J(e,l){1&e&&t.nrm(0,"img",32),2&e&&t.Y8G("src",l.$implicit,t.B4B)}function Q(e,l){if(1&e&&(t.j41(0,"div",29)(1,"h5"),t.EFF(2,"Image Preview:"),t.k0s(),t.j41(3,"div",30),t.DNE(4,J,1,1,"img",31),t.k0s()()),2&e){const n=t.XpG();t.R7$(4),t.Y8G("ngForOf",n.imagePreviews)}}let z=(()=>{class e{constructor(n,o,r,s,c){this._ProductService=n,this._ActivatedRoute=o,this._FormBuilder=r,this._Router=s,this.toster=c,this.imagePreviews=[],this.productForm=this._FormBuilder.group({title:["",[i.k0.required,i.k0.minLength(3),i.k0.maxLength(50)]],description:["",[i.k0.required,i.k0.minLength(10),i.k0.maxLength(200)]],price:["",[i.k0.required,i.k0.min(0)]],brand:["",[i.k0.required,i.k0.minLength(3),i.k0.maxLength(20)]],tags:["",[i.k0.required,i.k0.minLength(3),i.k0.maxLength(20)]],images:["",[i.k0.required]]}),this.productId=Number(this._ActivatedRoute.snapshot.paramMap.get("id"))}ngOnInit(){this._ProductService.getProductById(this.productId).subscribe({next:n=>{this.productForm.patchValue({title:n.title,description:n.description,price:n.price,brand:n.brand,tags:n.tags.join(", "),images:n.images[0]})},error:n=>{console.error("Error No product:",n)}})}onFileChange(n){const r=n.target.files;if(r&&r.length>0){const s=[];this.imagePreviews=[],Array.from(r).forEach(c=>{s.push(c.name);const f=new FileReader;f.onload=()=>{this.imagePreviews.push(f.result)},f.readAsDataURL(c)}),this.productForm.patchValue({images:s})}}handleForm(){if(this.productForm.valid){const n=this.productForm.value;this._ProductService.updateProduct(this.productId,{title:n.title,description:n.description,price:n.price,brand:n.brand,tags:n.tags,images:n.images}).subscribe({next:r=>{console.log("Product updated:",r),this._Router.navigate(["/home"]),this.toster.success("Product updated successfully")},error:r=>{console.error("Error updating product:",r),this.toster.error("Error updating product",r.message)}})}else console.log("Invalid form")}static{this.\u0275fac=function(o){return new(o||e)(t.rXU(_.b),t.rXU(T.nX),t.rXU(i.ok),t.rXU(T.Ix),t.rXU(p.tw))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-edit"]],standalone:!0,features:[t.aNF],decls:66,vars:14,consts:[[1,"container"],[1,"form-container"],["method","post",3,"formGroup","ngSubmit"],[1,"form-group"],["for","title"],["type","text","id","title","formControlName","title",1,"form-control"],["inputTitle",""],["class","alert alert-danger",4,"ngIf"],["for","description"],["id","description","formControlName","description",1,"form-control"],["inputDesc",""],["for","price"],["type","number","id","price","formControlName","price",1,"form-control"],["inputPrice",""],["for","brand"],["type","text","id","brand","formControlName","brand",1,"form-control"],["inputBrand",""],["for","tags"],["type","text","id","tags","formControlName","tags","placeholder","Enter tags separated by commas",1,"form-control"],["for","images"],["type","file","id","images","accept","image/jpeg,image/png","multiple","",1,"form-control",3,"change"],["inputImage",""],["type","submit",1,"submit-btn","btn","btn-primary","my-4",3,"disabled"],[1,"preview","mt-5","p-3","border","rounded","bg-light"],[4,"ngFor","ngForOf"],["class","mt-3",4,"ngIf"],[1,"alert","alert-danger"],[4,"ngIf"],[1,"badge","bg-secondary","me-1"],[1,"mt-3"],[1,"d-flex","flex-wrap","gap-2"],["class","img-thumbnail","style","width: 150px;",3,"src",4,"ngFor","ngForOf"],[1,"img-thumbnail",2,"width","150px",3,"src"]],template:function(o,r){if(1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h2"),t.EFF(3,"Edit Product"),t.k0s(),t.j41(4,"form",2),t.bIt("ngSubmit",function(){return r.handleForm()}),t.j41(5,"div",3)(6,"label",4),t.EFF(7,"Product Title"),t.k0s(),t.nrm(8,"input",5,6),t.DNE(10,D,4,3,"div",7),t.k0s(),t.j41(11,"div",3)(12,"label",8),t.EFF(13,"Description"),t.k0s(),t.nrm(14,"textarea",9,10),t.DNE(16,B,4,3,"div",7),t.k0s(),t.j41(17,"div",3)(18,"label",11),t.EFF(19,"Price"),t.k0s(),t.nrm(20,"input",12,13),t.DNE(22,y,3,2,"div",7),t.k0s(),t.j41(23,"div",3)(24,"label",14),t.EFF(25,"Brand"),t.k0s(),t.nrm(26,"input",15,16),t.DNE(28,A,4,3,"div",7),t.k0s(),t.j41(29,"div",3)(30,"label",17),t.EFF(31,"Tags"),t.k0s(),t.nrm(32,"input",18),t.DNE(33,K,4,3,"div",7),t.k0s(),t.j41(34,"div",3)(35,"label",19),t.EFF(36,"Select images:"),t.k0s(),t.j41(37,"input",20,21),t.bIt("change",function(c){return r.onFileChange(c)}),t.k0s(),t.DNE(39,W,2,1,"div",7),t.k0s(),t.j41(40,"button",22),t.EFF(41,"Update Product"),t.k0s()()(),t.j41(42,"div",23)(43,"h4"),t.EFF(44,"Live Preview"),t.k0s(),t.j41(45,"p")(46,"strong"),t.EFF(47,"Title:"),t.k0s(),t.EFF(48),t.k0s(),t.j41(49,"p")(50,"strong"),t.EFF(51,"Description:"),t.k0s(),t.EFF(52),t.k0s(),t.j41(53,"p")(54,"strong"),t.EFF(55,"Price:"),t.k0s(),t.EFF(56),t.k0s(),t.j41(57,"p")(58,"strong"),t.EFF(59,"Brand:"),t.k0s(),t.EFF(60),t.k0s(),t.j41(61,"p")(62,"strong"),t.EFF(63,"Tags:"),t.k0s(),t.DNE(64,V,3,1,"span",24),t.k0s(),t.DNE(65,Q,5,1,"div",25),t.k0s()()),2&o){const s=t.sdS(9),c=t.sdS(15),f=t.sdS(21),Z=t.sdS(27);let h,v,k,b,E,C,R,j,P,$,G;t.R7$(4),t.Y8G("formGroup",r.productForm),t.R7$(6),t.Y8G("ngIf",((null==(h=r.productForm.get("title"))?null:h.touched)||s.value.length>0)&&(null==(h=r.productForm.get("title"))?null:h.errors)),t.R7$(6),t.Y8G("ngIf",((null==(v=r.productForm.get("description"))?null:v.touched)||c.value.length>0)&&(null==(v=r.productForm.get("description"))?null:v.errors)),t.R7$(6),t.Y8G("ngIf",((null==(k=r.productForm.get("price"))?null:k.touched)||f.value.length>0)&&(null==(k=r.productForm.get("price"))?null:k.errors)),t.R7$(6),t.Y8G("ngIf",((null==(b=r.productForm.get("brand"))?null:b.touched)||Z.value.length>0)&&(null==(b=r.productForm.get("brand"))?null:b.errors)),t.R7$(5),t.Y8G("ngIf",((null==(E=r.productForm.get("tags"))?null:E.touched)||(null==(E=r.productForm.get("tags"))?null:E.value.length)>0)&&(null==(E=r.productForm.get("tags"))?null:E.errors)),t.R7$(6),t.Y8G("ngIf",(null==(C=r.productForm.get("images"))?null:C.touched)&&(null==(C=r.productForm.get("images"))?null:C.errors)),t.R7$(1),t.Y8G("disabled",r.productForm.invalid),t.R7$(8),t.SpI(" ",null==(R=r.productForm.get("title"))?null:R.value,""),t.R7$(4),t.SpI(" ",null==(j=r.productForm.get("description"))?null:j.value,""),t.R7$(4),t.SpI(" ",null==(P=r.productForm.get("price"))?null:P.value,""),t.R7$(4),t.SpI(" ",null==($=r.productForm.get("brand"))?null:$.value,""),t.R7$(4),t.Y8G("ngForOf",null==(G=r.productForm.get("tags"))?null:G.value.split(",")),t.R7$(1),t.Y8G("ngIf",r.imagePreviews.length>0)}},dependencies:[g.MD,g.Sq,g.bT,i.X1,i.qT,i.me,i.Q0,i.BC,i.cb,i.j4,i.JD,i.YN],styles:["p[_ngcontent-%COMP%]{padding:0;margin:0}"]})}}return e})()},9055:(N,F,a)=>{a.d(F,{b:()=>t});var g=a(8699),i=a(1626);let t=(()=>{class _{constructor(p){this._HttpClient=p,this.baseUrl="https://dummyjson.com/products"}getAllProducts(p=1,u=10){return this._HttpClient.get(`${this.baseUrl}?limit=${u}&skip=${(p-1)*u}`)}SearchProduct(p="",u=1,d=10){return this._HttpClient.get(this.baseUrl+`/search?q=${p}&limit=${d}&skip=${(u-1)*d}`)}sortProducts(p="",u="asc",d=1,m=10){return this._HttpClient.get(this.baseUrl+`?sortBy=${p}&order=${u}&limit=${m}&skip=${(d-1)*m}`)}addProduct(p){return this._HttpClient.post(this.baseUrl+"/add",p)}getProductById(p){return this._HttpClient.get(this.baseUrl+`/${p}`)}updateProduct(p,u){return this._HttpClient.put(this.baseUrl+`/${p}`,u)}static{this.\u0275fac=function(u){return new(u||_)(g.KVO(i.Qq))}}static{this.\u0275prov=g.jDH({token:_,factory:_.\u0275fac,providedIn:"root"})}}return _})()}}]);